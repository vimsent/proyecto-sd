README - Despliegue Proyecto Sistemas Distribuidos
Este documento detalla los pasos para compilar, configurar y ejecutar el sistema de Micro-Reseñas Distribuido en 4 Máquinas Virtuales (VMs) diferentes, partiendo desde cero (código fuente).
________________________________________
1. Instalación de Dependencias (En todas las máquinas)
Antes de compilar, cada máquina virtual necesita tener instalado Go y el compilador de Protocol Buffers. Ejecuta los siguientes comandos en la terminal de cada VM:
A. Actualizar sistema e instalar Go y Make
Bash
sudo apt update
sudo apt install -y golang-go make protobuf-compiler
B. Instalar plugins de Go para Protobuf
Estos plugins son necesarios para que el código .proto se convierta en código Go.
Bash
# Instalar plugins
go install google.golang.org/protobuf/cmd/protoc-gen-go@latest
go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest

# ¡IMPORTANTE! Asegurar que los plugins estén en el PATH
export PATH="$PATH:$(go env GOPATH)/bin"
(Nota: Si cierras la terminal, es posible que tengas que ejecutar la línea export nuevamente o agregarla a tu ~/.bashrc).
________________________________________
2. Configuración de Red (Solo una vez)
Debes indicarle al sistema cuáles son las IPs reales de tus máquinas virtuales.
1.	Abre el archivo Makefile con un editor de texto (ej. nano Makefile o vim Makefile).
2.	Al principio del archivo, encontrarás la sección de configuración. Edita las siguientes líneas con las IPs actuales de tus VMs:
Makefile
# ==========================================
# CONFIGURACIÓN DE RED (VARIABLES DE ENTORNO)
# ==========================================

VM1_IP=192.168.1.10   <-- Cambia esto por la IP de tu VM 1
VM2_IP=192.168.1.11   <-- Cambia esto por la IP de tu VM 2
VM3_IP=192.168.1.12   <-- Cambia esto por la IP de tu VM 3
VM_COORD_IP=192.168.1.20 <-- Cambia esto por la IP de tu VM 4 (Coordinador)
3.	Guarda los cambios y asegúrate de que todas las máquinas tengan la misma versión del Makefile (puedes editarlo en una y copiarlo a las demás, o editarlo manualmente en cada una).
________________________________________
3. Compilación del Proyecto
Una vez instaladas las dependencias y configuradas las IPs, compila el proyecto. Ejecuta esto en la carpeta raíz del proyecto (proyecto-sd/):
Bash
# 1. Descargar librerías del proyecto
go mod tidy

# 2. Generar código gRPC y compilar binarios
make build
Si todo sale bien, verás una carpeta bin/ con los ejecutables (datanode, coordinator, client).
________________________________________
4. Ejecución del Sistema
Cada máquina virtual debe ejecutar un comando específico dependiendo del rol que va a cumplir.
Máquina Virtual 1 (DataNode 1)
En la terminal de la VM 1:
Bash
make run-node-1
Máquina Virtual 2 (DataNode 2)
En la terminal de la VM 2:
Bash
make run-node-2
Máquina Virtual 3 (DataNode 3)
En la terminal de la VM 3:
Bash
make run-node-3
Máquina Virtual 4 (Coordinador)
En la terminal de la VM 4 (asegúrate de que los DataNodes ya estén corriendo o levántalos simultáneamente):
Bash
make run-coord
________________________________________
5. Uso del Cliente
Para probar el sistema, puedes correr el cliente desde cualquiera de las máquinas (o desde tu computador local si tienes acceso a la red de las VMs).
Bash
make run-client
Sigue las instrucciones en pantalla:
1.	Opción 1: Escribir una reseña (Se probará Read Your Writes).
2.	Opción 2: Leer reseña (Se verificará Monotonic Reads y se mostrará el reloj vectorial).
________________________________________
6. Solución de Problemas Comunes
•	Error: protoc-gen-go: program not found or is not executable:
o	Significa que el sistema no encuentra los plugins instalados.
o	Solución: Ejecuta de nuevo: export PATH="$PATH:$(go env GOPATH)/bin".
•	Error de Conexión / Timeouts:
o	Si las máquinas no se ven entre sí, revisa el Firewall.
o	Solución rápida (solo para pruebas): Permite el tráfico en los puertos usados o deshabilita el firewall temporalmente (sudo ufw disable en Ubuntu, o abrir puertos 50050-50053).
•	Error: bind: address already in use:
o	Ya hay un proceso corriendo en ese puerto.
o	Solución: Cierra la terminal donde corre el nodo anterior o usa killall datanode / killall coordinator.

